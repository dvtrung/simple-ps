WIDTH=16;
DEPTH=4096;
ADDRESS_RADIX=UNS;
DATA_RADIX=BIN;
CONTENT BEGIN
	[0..4095] : 0;

-- $0 stack count :0
-- left 0..15 :1
-- right 16..31 :2
	0:	1000000000000000; -- li 0 0
	1:	1000001000000100; -- li 2 4
	2:	1100001010001000; -- sll 2 8
-- addi 2 1 :6
-- $2 = 1024 :7
	3:	0100001000000000; -- st 2 0 0
--
	4:	1000001000001000; -- li 2 8
	5:	1100001010001000; -- sll 2 8
--addi 2 9 :12
	6:	1000101011111111; -- addi 2 -1
	7:	0100001010000000; -- st 2 128 0
--
	8:	1000000000000001; -- li 0 1
--
--:partition
--
	9:	1000011100000000; -- li 7 0
	10:	1111100001010000; -- cmp 0 7
	11:	1011100000110001; -- be :end
--
	12:	1000100011111111; -- addi 0 -1
-- $1: left, $2: right :25
	13:	0000000100000000; -- ld 1 0 0
	14:	0000001010000000; -- ld 2 128 0
--
-- if left >= right :29
	15:	1100101001010000; -- cmp 2 1
	16:	1011101011111000; -- ble :partition
--
-- $3 pivot value: $r3 = a[left] :33
	17:	1101010001100000; -- mov 4 2
	18:	1100110000010000; -- sub 4 1
	19:	1100010010100001; -- srl 4 1
	20:	1100110000000000; -- add 4 1
	21:	0010001100000000; -- ld 3 0 4
	22:	0000110100000000; -- ld 5 0 1
	23:	0100101100000000; -- st 3 0 1
	24:	0110010100000000; -- st 5 0 4
--
--
-- $4 left value: $r4 = left + 1 :44
-- $5 right value: $r5 = right :45
	25:	1100110001100000; -- mov 4 1
	26:	1101010101100000; -- mov 5 2
	27:	1000110000000001; -- addi 4 1
--
-- $r6 = a[left + 1] :50
-- $r4: i :51
--:find_left
	28:	0010011000000000; -- ld 6 0 4
	29:	1110000011101111; -- nop
-- if a[i] > pivot :55
	30:	1111001101010000; -- cmp 3 6
	31:	1011100100000100; -- blt :find_right
-- if i > right :58
	32:	1110001001010000; -- cmp 2 4
	33:	1011100100000010; -- blt :find_right
	34:	1000110000000001; -- addi 4 1
	35:	1010000011111000; -- b 0 :find_left
--
--:find_right
	36:	0010111100000000; -- ld 7 0 5
	37:	1110000011101111; -- nop
-- if a[j] < pivot :67
	38:	1101111101010000; -- cmp 7 3
	39:	1011100100000100; -- blt :swap
-- if j < left :70
	40:	1100110101010000; -- cmp 5 1
	41:	1011100000000010; -- be :swap
	42:	1000110111111111; -- addi 5 -1
	43:	1010000011111000; -- b 0 :find_right
--
--:swap
-- swap a[$r4] with a[$r5] :77
-- $r5: j :78
	44:	1110010101010000; -- cmp 5 4
	45:	1011101000000101; -- ble :end_partition
	46:	0110111000000000; -- st 6 0 5
	47:	0110011100000000; -- st 7 0 4
	48:	1000110000000001; -- addi 4 1
	49:	1000110111111111; -- addi 5 -1
	50:	1010000011101001; -- b 0 :find_left
--
--:end_partition
--
	51:	0100111100000000; -- st 7 0 1
	52:	0110101100000000; -- st 3 0 5
--
-- recursion :92
--
	53:	1000110111111111; -- addi 5 -1
	54:	0100000100000000; -- st 1 0 0
	55:	0100010110000000; -- st 5 128 0
	56:	1000100000000001; -- addi 0 1
--
	57:	0100010000000000; -- st 4 0 0
	58:	0100001010000000; -- st 2 128 0
	59:	1000100000000001; -- addi 0 1
--
	60:	1010000011001100; -- b 0 :partition
--
--:end
--
-- output :107
	61:	1000001000000100; -- li 2 4
	62:	1100001010001000; -- sll 2 8
--
	63:	1000101000000001; -- addi 2 1
	64:	0001011000000000; -- ld 6 0 2
	65:	1000101000000001; -- addi 2 1
	66:	0001011100000000; -- ld 7 0 2
	67:	1111011111010000; -- out 6 7 0
--
	68:	1000101000000001; -- addi 2 1
	69:	0001011000000000; -- ld 6 0 2
	70:	1000101000000001; -- addi 2 1
	71:	0001011100000000; -- ld 7 0 2
	72:	1111011111010001; -- out 6 7 1
--
	73:	1000101000000001; -- addi 2 1
	74:	0001011000000000; -- ld 6 0 2
	75:	1000101000000001; -- addi 2 1
	76:	0001011100000000; -- ld 7 0 2
	77:	1111011111010010; -- out 6 7 2
--
	78:	1000101000000001; -- addi 2 1
	79:	0001011000000000; -- ld 6 0 2
	80:	1000101000000001; -- addi 2 1
	81:	0001011100000000; -- ld 7 0 2
	82:	1111011111010011; -- out 6 7 3
--
--b 0 :printing :135
--
	83:	1110000011101111; -- nop
	84:	1100000011110000; -- hlt
END;
