WIDTH=16;
DEPTH=4096;
ADDRESS_RADIX=UNS;
DATA_RADIX=BIN;
CONTENT BEGIN
	[0..4095] : 0;

-- $0 stack count :0
-- left 0..15 :1
-- right 16..31 :2
	0:	1000000000000000; -- li 0 0
	1:	1000000100000100; -- li 1 4
	2:	1100000110001000; -- sll 1 8
-- addi 2 1 :6
-- $2 = 1024 :7
	3:	0100000100000000; -- st 1 0 0
--
	4:	1000001000001000; -- li 2 8
	5:	1100001010001000; -- sll 2 8
--addi 2 9 :12
	6:	1000101011111111; -- addi 2 -1
	7:	0100001010000000; -- st 2 128 0
--
--:bubble_sort
	8:	1100101101100000; -- mov 3 1
	9:	1000011100000000; -- li 7 0
	10:	1000000000000000; -- li 0 0
--
-- r0: swapped?, r3: i :21
--:bbs_loop
	11:	1101110001100000; -- mov 4 3
	12:	0010010100000000; -- ld 5 0 4
	13:	1000101100000001; -- addi 3 1
	14:	0001111000000000; -- ld 6 0 3
	15:	1101001101010000; -- cmp 3 2
	16:	1011100000000101; -- be :end_bubble
	17:	1111010101010000; -- cmp 5 6
	18:	1011101011111000; -- ble :bbs_loop
	19:	1000000000000001; -- li 0 1
	20:	0101110100000000; -- st 5 0 3
	21:	0110011000000000; -- st 6 0 4
--:end_bubble
--
	22:	1111100001010000; -- cmp 0 7
	23:	1011100000110101; -- be :end
--
	24:	1000000000000001; -- li 0 1
--
--:partition
--
	25:	1000011100000000; -- li 7 0
	26:	1111100001010000; -- cmp 0 7
	27:	1011100000110001; -- be :end
--
	28:	1000100011111111; -- addi 0 -1
-- $1: left, $2: right :48
	29:	0000000100000000; -- ld 1 0 0
	30:	0000001010000000; -- ld 2 128 0
--
-- if left >= right :52
	31:	1100101001010000; -- cmp 2 1
	32:	1011101011111000; -- ble :partition
--
-- $3 pivot value: $r3 = a[left] :56
	33:	1101010001100000; -- mov 4 2
	34:	1100110000010000; -- sub 4 1
	35:	1100010010100001; -- srl 4 1
	36:	1100110000000000; -- add 4 1
	37:	0010001100000000; -- ld 3 0 4
	38:	0000110100000000; -- ld 5 0 1
	39:	0100101100000000; -- st 3 0 1
	40:	0110010100000000; -- st 5 0 4
--
--
-- $4 left value: $r4 = left + 1 :67
-- $5 right value: $r5 = right :68
	41:	1100110001100000; -- mov 4 1
	42:	1101010101100000; -- mov 5 2
	43:	1000110000000001; -- addi 4 1
--
-- $r6 = a[left + 1] :73
-- $r4: i :74
--:find_left
	44:	0010011000000000; -- ld 6 0 4
	45:	1110000011101111; -- nop
-- if a[i] > pivot :78
	46:	1111001101010000; -- cmp 3 6
	47:	1011100100000100; -- blt :find_right
-- if i > right :81
	48:	1110001001010000; -- cmp 2 4
	49:	1011100100000010; -- blt :find_right
	50:	1000110000000001; -- addi 4 1
	51:	1010000011111000; -- b 0 :find_left
--
--:find_right
	52:	0010111100000000; -- ld 7 0 5
	53:	1110000011101111; -- nop
-- if a[j] < pivot :90
	54:	1101111101010000; -- cmp 7 3
	55:	1011100100000100; -- blt :swap
-- if j < left :93
	56:	1100110101010000; -- cmp 5 1
	57:	1011100000000010; -- be :swap
	58:	1000110111111111; -- addi 5 -1
	59:	1010000011111000; -- b 0 :find_right
--
--:swap
-- swap a[$r4] with a[$r5] :100
-- $r5: j :101
	60:	1110010101010000; -- cmp 5 4
	61:	1011101000000101; -- ble :end_partition
	62:	0110111000000000; -- st 6 0 5
	63:	0110011100000000; -- st 7 0 4
	64:	1000110000000001; -- addi 4 1
	65:	1000110111111111; -- addi 5 -1
	66:	1010000011101001; -- b 0 :find_left
--
--:end_partition
--
	67:	0100111100000000; -- st 7 0 1
	68:	0110101100000000; -- st 3 0 5
--
-- recursion :115
--
	69:	1000110111111111; -- addi 5 -1
	70:	0100000100000000; -- st 1 0 0
	71:	0100010110000000; -- st 5 128 0
	72:	1000100000000001; -- addi 0 1
--
	73:	0100010000000000; -- st 4 0 0
	74:	0100001010000000; -- st 2 128 0
	75:	1000100000000001; -- addi 0 1
--
	76:	1010000011001100; -- b 0 :partition
--
--:end
--
-- output :130
	77:	1000001000000100; -- li 2 4
	78:	1100001010001000; -- sll 2 8
--
	79:	1000101000000001; -- addi 2 1
	80:	0001011000000000; -- ld 6 0 2
	81:	1000101000000001; -- addi 2 1
	82:	0001011100000000; -- ld 7 0 2
	83:	1111011111010000; -- out 6 7 0
--
	84:	1000101000000001; -- addi 2 1
	85:	0001011000000000; -- ld 6 0 2
	86:	1000101000000001; -- addi 2 1
	87:	0001011100000000; -- ld 7 0 2
	88:	1111011111010001; -- out 6 7 1
--
	89:	1000101000000001; -- addi 2 1
	90:	0001011000000000; -- ld 6 0 2
	91:	1000101000000001; -- addi 2 1
	92:	0001011100000000; -- ld 7 0 2
	93:	1111011111010010; -- out 6 7 2
--
	94:	1000101000000001; -- addi 2 1
	95:	0001011000000000; -- ld 6 0 2
	96:	1000101000000001; -- addi 2 1
	97:	0001011100000000; -- ld 7 0 2
	98:	1111011111010011; -- out 6 7 3
--
--b 0 :printing :158
--
	99:	1110000011101111; -- nop
	100:	1100000011110000; -- hlt
END;
